<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>What is AV programming?</title>
        <meta name="color-scheme" content="light dark">
		<meta name="robots" content="noindex, nofollow">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <header>
            <h1>What is AV programming?</h1>
            <i>Short introduction to the coding world of the audiovisual.</i>
        </header>
        <main>
            <p>
                Programming is fun. AV programming? Even more so.
                But they differ. I'll talk from my experience which
                involves control systems programming. At our company
                (which is fairly small) I'm the one and only programmer
                on duty. As of writing, I've worked with AV for a little
                over a year.
            </p>
            <br>
            <p>
                To fully understand the purpose of the AV programmer we
                must understand the purpose of the AV system.
                Let's imagine a conferencing room. The AV system needs to
                fulfil the customer's needs.
            </p>
            <p>
                What are those needs?
                Nowadays the answer will probably be a hybrid meeting.
                Hybrid meetings are meetings where the participants
                may be present in either the on-site location (aka the
                conference room) or in a remote location (perhaps at home.)
            </p>
            <p>
                What is required of the AV system to accomplish this?
                More than likely the on-site employee will want some way to
                view the remote participants, talk to them, and share
                their own screen as well as the conference room for the
                participants to see. Simple enough, there are plenty solutions
                that will provide all of this without any programming
                required.
            </p>
            <p>
                Devices required in such an installation may include:
                a speaker, a microphone, a display, a camera, and
                some way to connect this equipment to a laptop, like
                a USB hub. This can get a little bit more involved
                depending on cable lenghts and other technical
                specifications but we'll forgo those details
                in this scenario.
            </p>
            <br>
            <p>
                Fast-forward a year or two and the customer comes back
                to the AV integrator. They find it annoying that
                they have to control all the equipment using multiple
                remotes and the remotes keep getting lost.
                Now is the time to implement a control system.
                The control system is a system that is tasked with
                controlling the AV system. In this case, it would be
                tasked with controlling third-party or external products
                in order to ease the amount of manual work that has
                to be done by the end-user if the automation weren't there.
                Typically the control system is sold as a single unit,
                often referred to as a "control processor."
            </p>
            <p>
                If you were the AV programmer in this case, what would
                you need to know in order to finish the task at hand?
                Firstly, and probably most obviously, would be that the 
                programmer must understand how to program towards the 
                control system in use. Then, the programmer must know 
                how to control the devices in the AV system. Finally, 
                it is probably good for the programmer to know how to 
                test the system and troubleshoot it. That is, broadly 
                speaking, what the programmer needs to know.
            </p>
            <p>
                Simple, right? Well, that depends on how you look at it. Truly,
                in order for the programmer to finish any installation they must
                possess intimate knowledge of the system. Unless the product
                is tightly coupled with the control system and convenient to
                integrate; each product that is to be controlled by the control
                processor must be researched in order for the programmer to know
                how to communicate with said device and what to communicate
                to the device. Think of it as integrating an API into your project
                except that in 5% of the cases there is no documentation and you must
                reverse-engineer it and in another 5% of the cases the documentation is
                really obscure. Good odds, things considered.
            </p>
            <br>
            <p>
                So then, let's look at the actual implementation of this
                control system in our imaginary conferencing room.
                The AV integrator managed to sell the customer: a control processor;
                an audio processor (DSP); and a touchpanel to interface with the controller.
                This setup will require some rewiring, specifically of the microphone 
                and speakers since they will now be connected to the DSP whereas
                previously the microphone may have been connected via USB
                directly to the hub and the speakers may have been wired to the
                display so that they receive audio from the HDMI signal.
                The drawing provided below shows how this could look.
                Click on it to open/download a larger version.
            </p>
            <figure>
                <a href="what-is-av-programming/drawing.pdf" target="_blank">
                    <img src="what-is-av-programming/drawing.jpg" alt="">
                </a>
            </figure>
            <p>
                Clearly this is not something you'd share with a
                customer but this rudimentary drawing will serve our purposes just fine.
            </p>
            <p>
                Take notice of the network switch. This is not something I had mentioned
                previously but we will assume that all control is done over Ethernet.
                Serial communication over RS232 and control via relays is still pretty
                common even today. I won't touch on the grade of the cabling or what kind
                of audio cables are in use as that is typically not of interest in this context.
                Electrical cables are even less interesting even for our installation technicians
                but it is good to be aware of what products can be supplied voltage through Category
                cables (usually touchpanels, cameras, and even some smaller control processors.)
            </p>
            <br>
            <p>
                When we program, we program according to the customer's needs and wants (or
                whatever was agreed upon in the procurement.) Thus, some programming 
                considerations may only be resolved by consulting the aforementioned
                factors. When we are missing any information from these factors, we
                tend to continue with what we consider to be best practice.
                "Fill in the blanks" so to speak.
            </p>
            <p>
                In this scenario, I would most likely add a "start page" to the touchpanel
                from which you start the system. After pressing something on the start screen
                the controller will start a countdown and initialise the system's devices to
                a state that is ready to use for conferencing. This might include turning on
                the display, recalling a preset on the camera, unmuting the microphone, setting
                an appropriate audio level, and switching the display to the correct HDMI input.
            </p>
            <p>
                Once the initialisation process has completed, the touchpanel would flip to
                the main page. From there you may control any of the components as you wish,
                however most users should be fine without having to tune anything. The same
                process may be applied on shutdown, just making sure to do the reverse instead:
                setting the display to standby, setting the camera to standby, muting the microphone, etc.
            </p>
            <p>
                This On/Off process may be beneficial for a conferencing room because
                equipment is expected to be turned off when users leave the room.
                On the contrary, an On/Off state may be a detriment in scenarios where
                equipment is expected to be operating for prolonged periods of time and
                only be shutdown at a specific hour. It all depends on what one seeks to
                accomplish with the system and the present needs.
            </p>
            <br>
            <p>
                But hold on, what does the control system actually control?
                Well, some of it was mentioned already, and this would be a complete
                list of what exactly is being interfaced with:
            </p>
            <ul>
                <li>The touchpanel</li>
                <li>The display</li>
                <li>The camera</li>
                <li>The audio processor (DSP)...</li>
                <ul>
                    <li>... which controls the speakers</li>
                    <li>and the microphone.</li>
                </ul>
            </ul>
            <p>
                Not so overwhelming. Nevertheless, the display, camera, and DSP are
                most likely <i>not</i> made by the same manufacturer as the touchpanel
                and control processor and as such must be integrated in
                special ways. Fret not! This is quite a common thing to do
                and modules most often exist for it. The DSP more than likely
                has some pre-made modules so as to ease the programming process.
                If you're lucky, the display is good enough to contain built-in
                integration with your control system. Otherwise they usually come
                with some TCP/IP server for controlling it... or RS232.
                Cameras can be a little trickier, especially depending on the 
                manufacturer. If a module doesn't exist, the PTZ cameras most
                often use web interfaces that authenticate using BASIC.
                That means you can just use inspect element in your browser,
                grab the GET request and be good to go.
            </p>
            <br>
            <p>
                Hopefully I gave you a little insight into the process of AV programming.
                It feels like this text was a bit all over the place, but that's my style!
                I know, I didn't actually discuss much more than the overarching process itself,
                but I felt like that was the point of the text. I will probably expand on
                the details in the future... ;)
        </main>
        <footer>
            <p>Authored by Ragge &mdash; See <a href="../LICENSE.txt">/LICENSE.txt</a></p>
            <p>Revision 0; Published 2023-11-13</p>
        </footer>
    </body>
</html>